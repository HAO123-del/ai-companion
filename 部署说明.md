# AI 伴侣 - 部署说明

## 项目结构

```
ai-companion/
├── backend/          # 后端 Python FastAPI
├── frontend/         # 前端 Vue 3 + TypeScript
├── render.yaml       # Render 部署配置
└── 使用说明书.md      # 用户使用说明
```

---

## 本地开发

### 环境要求
- Python 3.10+
- Node.js 18+
- npm 或 yarn

### 启动后端
```bash
cd backend
pip install -r requirements.txt
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 启动前端
```bash
cd frontend
npm install
npm run dev
```

访问 http://localhost:5173

---

## 部署到 Render（推荐）

### 1. 准备工作
- 注册 GitHub 账号
- 注册 Render 账号 (https://render.com)

### 2. 上传代码到 GitHub
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/你的用户名/ai-companion.git
git push -u origin main
```

### 3. 部署后端
1. 登录 Render，点击 New → Web Service
2. 连接 GitHub 仓库
3. 配置：
   - Name: `ai-companion-api`
   - Root Directory: `backend`
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `uvicorn main:app --host 0.0.0.0 --port $PORT`
   - Instance Type: Free
4. 点击 Create Web Service
5. 记下部署后的 URL（如 https://ai-companion-api.onrender.com）

### 4. 部署前端
1. 点击 New → Static Site
2. 连接同一个 GitHub 仓库
3. 配置：
   - Name: `ai-companion-frontend`
   - Root Directory: `frontend`
   - Build Command: `npm install && npm run build`
   - Publish Directory: `dist`
4. 添加环境变量：
   - Key: `VITE_API_URL`
   - Value: `https://你的后端URL`（上一步得到的）
5. 点击 Create Static Site

### 5. 完成
前端部署完成后，访问前端 URL 即可使用。

---

## 其他部署方式

### 部署到 Vercel（仅前端）
1. 后端需要单独部署到其他平台
2. 前端可以部署到 Vercel

### 部署到自己的服务器
1. 安装 Python 3.10+ 和 Node.js 18+
2. 后端用 gunicorn 或 uvicorn 运行
3. 前端 `npm run build` 后用 nginx 托管 dist 目录
4. 配置反向代理

---

## 配置说明

### 前端配置
文件：`frontend/.env.production`
```
VITE_API_URL=https://你的后端地址
```

### 后端配置
后端通过前端传递的 API Key 调用 MiniMax，无需在服务器配置密钥。

---

## MiniMax API

用户需要自行获取 MiniMax API：
1. 访问 https://platform.minimaxi.com
2. 注册账号
3. 获取 API Key 和 Group ID
4. 在应用设置页面填入

---

## 技术栈

- 后端：Python FastAPI + SQLite
- 前端：Vue 3 + TypeScript + Tailwind CSS
- AI：MiniMax API（聊天 + 语音合成 + 声音克隆）

---

## 注意事项

1. Render 免费版会休眠，首次访问需等待
2. SQLite 数据库在免费版可能不持久，生产环境建议换 PostgreSQL
3. MiniMax API 有调用费用，用户自行承担

---

## 联系方式

如有问题请联系开发者。
